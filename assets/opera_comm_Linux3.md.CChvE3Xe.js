import{_ as a,c as i,ae as n,o as l}from"./chunks/framework.BNHv4zad.js";const e="/assets/batch.aNqNdPMT.png",u=JSON.parse('{"title":"集群常用操作","description":"","frontmatter":{},"headers":[],"relativePath":"opera_comm/Linux3.md","filePath":"opera_comm/Linux3.md"}'),t={name:"opera_comm/Linux3.md"};function p(h,s,r,k,d,o){return l(),i("div",null,s[0]||(s[0]=[n('<h1 id="集群常用操作" tabindex="-1">集群常用操作 <a class="header-anchor" href="#集群常用操作" aria-label="Permalink to &quot;集群常用操作&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#qsub提交任务-pbs常用操作">qsub提交任务+PBS常用操作</a></li><li><a href="#screen后台执行">screen后台执行</a></li><li><a href="#tmux后台执行">tmux后台执行</a></li><li><a href="#其他常用命令">其他常用命令</a><ul><li><a href="#_1-tail">1.tail</a></li><li><a href="#_2-sensors-查看集群温度">2. sensors：查看集群温度</a></li><li><a href="#_3-last-n-10-查看最近登录的十个人">3. last -n 10：查看最近登录的十个人</a></li><li><a href="#_4-users-查看正在登录的用户">4. users：查看正在登录的用户</a></li><li><a href="#_5-查看内存">5. 查看内存</a></li></ul></li></ul></nav><h2 id="qsub提交任务-pbs常用操作" tabindex="-1">qsub提交任务+PBS常用操作 <a class="header-anchor" href="#qsub提交任务-pbs常用操作" aria-label="Permalink to &quot;qsub提交任务+PBS常用操作&quot;">​</a></h2><ul><li><p>直接给出提交作业脚本batch.dat文件 <img src="'+e+`" alt="batch.dat文件"></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-q</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #这个不变就可以了  q:queen序列</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">-N</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ***</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #可以自行修改</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#nodes：需要申请的节点数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ppn：每个节点上需要申请的CPU数</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#总核数=nodes×ppn</span></span></code></pre></div></li><li><p>对于NIMROD计算</p><ul><li>总核数是 nxbl×nybl×nlayers的公约数</li><li>总核数是nlayers的倍数</li><li>设置好之后保存退出，命令行输入qsub batch.dat</li></ul></li><li><p>PBS常用操作</p><ul><li>PBS（Portable Batch System）是一种广泛应用于高性能计算（HPC）领域的作业管理系统，主要用于管理和调度计算资源。它支持批处理作业、交互式作业以及并行作业（如MPI、PVM等），能够高效地分配和控制计算任务。</li><li>常用命令<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qsub</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 文件名.pbs/sh</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(提交任务)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qstat</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(列出状态)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qdel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jobid</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(取消任务)；删除自己上传上去的任务：qdel +任务id，eg：qdel 29843</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showq</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #展示终端计算机上目前运行、排队的情况</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># idle jobs 等待当中的作业；PROC：用了16个核；WCLIMIT：等待时间一天；QUEUETIME：提交算例时的时间</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 某节点</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(转到某节点) </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 在hpc上 ssh node1或者node2 3 4 5 6就可以登录到节点上面计算</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 如果不qsub，也不ssh nodex，那就是在自己的登录节点上计算，这样有可能影响到别人的登录，会卡顿等等</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 所里大集群交作业ssh -Y -C mu01</span></span></code></pre></div></li><li>其他命令<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pbsnodes</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(查看所有节点，有几个，叫什么)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pbsnodes-l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> free</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(查看空闲节点)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pbsnodes某节点</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(查看某节点状态)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(离开节点)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -q</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(列出队列)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(列出队列中使用的节点）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">qstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> jobid</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #(查看jobid任务的详细信息)</span></span></code></pre></div><ul><li>其中qstat：用于查询作业状态信息 <ul><li>命令格式：qstat[-fl][-al][-il][-n][-s][-R][-Q][-q][-B][-u]</li><li>参数说明：</li></ul></li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-f jobid列出指定作业的信息</span></span>
<span class="line"><span>-a 列出系统所有作业</span></span>
<span class="line"><span>-i 列出不在运行的作业</span></span>
<span class="line"><span>-n 列出分配给此作业的结点</span></span>
<span class="line"><span>-s 列出队列管理员与scheduler所提供的建议</span></span>
<span class="line"><span>-R 列出磁盘预留信息</span></span>
<span class="line"><span>-Q 操作符是destinationid，指明请求的是队列状态</span></span>
<span class="line"><span>-q 列出队列状态，并以alternative形式显示</span></span>
<span class="line"><span>-au userid 列出指定用户的所有作业</span></span>
<span class="line"><span>-B 列出 PBS Server 信息</span></span>
<span class="line"><span>-r 列出所有正在运行的作业</span></span>
<span class="line"><span>-Qf queue 列出指定队列的信息</span></span>
<span class="line"><span>-u 若操作符为作业号，则列出其状态。若操作符为destinationid，则列出运行在其上的属于user_list中用户的作业状态。</span></span></code></pre></div></li></ul></li></ul><h2 id="screen后台执行" tabindex="-1">screen后台执行 <a class="header-anchor" href="#screen后台执行" aria-label="Permalink to &quot;screen后台执行&quot;">​</a></h2><ul><li>提交作业【在关闭本地电脑的情况下，远程服务器仍然工作】</li><li><blockquote><p>语法：screen -S screen-name</p></blockquote></li><li>eg:screen -S fyma_test1</li><li>Ctrl+a+d 暂时先离开，但是这个计算还是在继续</li><li>Ctrl+d 杀死/停止这个计算（有点类似于Ctrl+c）</li></ul><p>【还要补充截图】</p><h2 id="tmux后台执行" tabindex="-1">tmux后台执行 <a class="header-anchor" href="#tmux后台执行" aria-label="Permalink to &quot;tmux后台执行&quot;">​</a></h2><p>【还要补充】</p><h2 id="其他常用命令" tabindex="-1">其他常用命令 <a class="header-anchor" href="#其他常用命令" aria-label="Permalink to &quot;其他常用命令&quot;">​</a></h2><h3 id="_1-tail" tabindex="-1">1.tail <a class="header-anchor" href="#_1-tail" aria-label="Permalink to &quot;1.tail&quot;">​</a></h3><ul><li>提交任务之后显示一些信息</li><li>tail -f nimrod.out（相当于之前拿./nimrod-ser输出的那些信息）</li></ul><h3 id="_2-sensors-查看集群温度" tabindex="-1">2. sensors：查看集群温度 <a class="header-anchor" href="#_2-sensors-查看集群温度" aria-label="Permalink to &quot;2. sensors：查看集群温度&quot;">​</a></h3><h3 id="_3-last-n-10-查看最近登录的十个人" tabindex="-1">3. last -n 10：查看最近登录的十个人 <a class="header-anchor" href="#_3-last-n-10-查看最近登录的十个人" aria-label="Permalink to &quot;3. last -n 10：查看最近登录的十个人&quot;">​</a></h3><h3 id="_4-users-查看正在登录的用户" tabindex="-1">4. users：查看正在登录的用户 <a class="header-anchor" href="#_4-users-查看正在登录的用户" aria-label="Permalink to &quot;4. users：查看正在登录的用户&quot;">​</a></h3><h3 id="_5-查看内存" tabindex="-1">5. 查看内存 <a class="header-anchor" href="#_5-查看内存" aria-label="Permalink to &quot;5. 查看内存&quot;">​</a></h3><ul><li>du -sh 查看本目录下面的总内存</li><li>df -h 查看集群各个盘的内存大小</li></ul>`,17)]))}const b=a(t,[["render",p]]);export{u as __pageData,b as default};
